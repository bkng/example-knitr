\documentclass{report}

%% for inline R code: if the inline code is not correctly parsed, you will see a message
\newcommand{\rinline}[1]{SOMETHING WRONG WITH knitr}
%% begin.rcode setup, include=FALSE, cache=FALSE
% opts_chunk$set(fig.path='figure/latex-', cache.path='cache/latex-')
% read_chunk('example.r')
%% end.rcode

\begin{document}

First I create two variables with R:

%% begin.rcode  p1
%% end.rcode

Now I plot them:

%% begin.rcode  p2
%% end.rcode

\end{document} 
